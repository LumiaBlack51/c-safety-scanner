# ä»£ç å…³ç³»ä¸æ¨¡å—ä¾èµ–å›¾

## ğŸ”— æ ¸å¿ƒæ¨¡å—ä¾èµ–å…³ç³»

### 1. è§£æå¼•æ“å±‚ (Core Layer)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ast_parser.ts                           â”‚
â”‚                  (ä¸»è§£æå¼•æ“)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Native Tree-  â”‚  â”‚  Web Tree-      â”‚  â”‚  Clang AST   â”‚ â”‚
â”‚  â”‚  sitter        â”‚  â”‚  sitter WASM    â”‚  â”‚  JSON        â”‚ â”‚
â”‚  â”‚  (ä¼˜å…ˆ)        â”‚  â”‚  (å›é€€)         â”‚  â”‚  (æœ€ç»ˆå›é€€)  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ast_scanner.ts                           â”‚
â”‚                  (æ‰«æåè°ƒå™¨)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ æ–‡ä»¶éå†ç®¡ç†                                             â”‚
â”‚  â€¢ æ£€æµ‹å™¨è°ƒåº¦                                               â”‚
â”‚  â€¢ ç»“æœèšåˆ                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. æ£€æµ‹å™¨å±‚ (Detector Layer)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ast_scanner.ts                           â”‚
â”‚                  (æ‰«æåè°ƒå™¨)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ£€æµ‹å™¨åˆ†å‘                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ast_variable_   â”‚  â”‚ ast_library_    â”‚  â”‚ ast_advanced â”‚ â”‚
â”‚  â”‚ detector.ts     â”‚  â”‚ detector.ts     â”‚  â”‚ detector.ts  â”‚ â”‚
â”‚  â”‚                â”‚  â”‚                â”‚  â”‚              â”‚ â”‚
â”‚  â”‚ â€¢ æœªåˆå§‹åŒ–æ£€æµ‹  â”‚  â”‚ â€¢ å¤´æ–‡ä»¶æ£€æŸ¥    â”‚  â”‚ â€¢ æ­»å¾ªç¯æ£€æµ‹ â”‚ â”‚
â”‚  â”‚ â€¢ é‡æŒ‡é’ˆæ£€æµ‹    â”‚  â”‚ â€¢ æ‹¼å†™æ£€æŸ¥      â”‚  â”‚ â€¢ æ•°å€¼èŒƒå›´   â”‚ â”‚
â”‚  â”‚ â€¢ ç©ºæŒ‡é’ˆæ£€æµ‹    â”‚  â”‚ â€¢ åº“å‡½æ•°æ£€æŸ¥    â”‚  â”‚ â€¢ å†…å­˜æ³„æ¼   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â€¢ æ ¼å¼æ£€æŸ¥   â”‚ â”‚
â”‚                                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å¯å‘å¼å›é€€æ£€æµ‹å™¨                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ checkUninitializedVariablesFallback()                   â”‚
â”‚  â€¢ checkWildPointersFallback()                             â”‚
â”‚  â€¢ checkNullPointersFallback()                             â”‚
â”‚  â€¢ checkDeadLoopsFallback()                                â”‚
â”‚  â€¢ checkMemoryLeaksFallback()                              â”‚
â”‚  â€¢ checkFormatStringsFallback()                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. æ¥å£å±‚ (Interface Layer)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  cli_standalone.ts                         â”‚
â”‚                  (ä¸»å…¥å£æ¥å£)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ å‘½ä»¤è¡Œå‚æ•°è§£æ                                           â”‚
â”‚  â€¢ å¼•æ“æ¨¡å¼é€‰æ‹© (auto/ast/heuristic)                       â”‚
â”‚  â€¢ è¯„æµ‹æ¨¡å¼æ”¯æŒ (--eval)                                    â”‚
â”‚  â€¢ æ··åˆæ£€æµ‹æ¨¡å¼å®ç°                                         â”‚
â”‚  â€¢ æ™ºèƒ½å›é€€æœºåˆ¶                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å…¶ä»–æ¥å£                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚     cli.ts      â”‚  â”‚   dev-run.ts    â”‚  â”‚ extension.ts â”‚ â”‚
â”‚  â”‚  (CLIæ¥å£)      â”‚  â”‚  (å¼€å‘è¿è¡Œ)     â”‚  â”‚ (VSCodeæ‰©å±•) â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. å·¥å…·å±‚ (Utility Layer)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å·¥å…·æ¨¡å—                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ function_header â”‚  â”‚ segmented_table â”‚                  â”‚
â”‚  â”‚ _map.ts         â”‚  â”‚ .ts             â”‚                  â”‚
â”‚  â”‚                â”‚  â”‚                â”‚                  â”‚
â”‚  â”‚ â€¢ å‡½æ•°-å¤´æ–‡ä»¶   â”‚  â”‚ â€¢ åˆ†æ®µè¡¨ç®¡ç†    â”‚                  â”‚
â”‚  â”‚   æ˜ å°„å…³ç³»      â”‚  â”‚ â€¢ å˜é‡çŠ¶æ€è·Ÿè¸ª  â”‚                  â”‚
â”‚  â”‚ â€¢ åº“å‡½æ•°è¯†åˆ«    â”‚  â”‚ â€¢ ä½œç”¨åŸŸç®¡ç†    â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ æ•°æ®æµå›¾

### 1. AST è§£ææµç¨‹

```
æºç æ–‡ä»¶ â†’ cli_standalone.ts â†’ CASTParser.create()
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ä¸‰å±‚è§£æå¼•æ“é€‰æ‹©                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. å°è¯•åŸç”Ÿ tree-sitter                                    â”‚
â”‚     â†“ å¤±è´¥                                                  â”‚
â”‚  2. å°è¯• web-tree-sitter WASM                              â”‚
â”‚     â†“ å¤±è´¥                                                  â”‚
â”‚  3. ä½¿ç”¨ clang AST JSON                                     â”‚
â”‚     â”œâ”€â”€ æ™ºèƒ½ JSON ä¿®å¤                                      â”‚
â”‚     â”œâ”€â”€ èŠ‚ç‚¹ç±»å‹æ˜ å°„                                        â”‚
â”‚     â””â”€â”€ AST æ ‘æ„å»º                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                            AST æ ¹èŠ‚ç‚¹è¿”å›
```

### 2. æ£€æµ‹æµç¨‹

```
AST æ ¹èŠ‚ç‚¹ â†’ æ£€æµ‹å™¨åˆ†å‘
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ··åˆæ£€æµ‹æ¨¡å¼                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  AST æˆåŠŸ:                                                  â”‚
â”‚  â”œâ”€â”€ å˜é‡æ£€æµ‹ (AST) â†’ å¤±è´¥ â†’ å¯å‘å¼å›é€€                     â”‚
â”‚  â”œâ”€â”€ æŒ‡é’ˆæ£€æµ‹ (AST) â†’ å¤±è´¥ â†’ å¯å‘å¼å›é€€                     â”‚
â”‚  â”œâ”€â”€ å¾ªç¯æ£€æµ‹ (AST) â†’ å¤±è´¥ â†’ å¯å‘å¼å›é€€                     â”‚
â”‚  â”œâ”€â”€ å†…å­˜æ£€æµ‹ (AST) â†’ å¤±è´¥ â†’ å¯å‘å¼å›é€€                     â”‚
â”‚  â”œâ”€â”€ æ ¼å¼æ£€æµ‹ (AST) â†’ å¤±è´¥ â†’ å¯å‘å¼å›é€€                     â”‚
â”‚  â””â”€â”€ å¤´æ–‡ä»¶æ£€æµ‹ (å¯å‘å¼) â† ASTä¸é€‚åˆ                        â”‚
â”‚                                                             â”‚
â”‚  AST å¤±è´¥:                                                  â”‚
â”‚  â””â”€â”€ å®Œå…¨å¯å‘å¼æ£€æµ‹                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
            æ£€æµ‹ç»“æœèšåˆ
```

### 3. è¯„æµ‹æµç¨‹

```
æ£€æµ‹ç»“æœ â†’ è¯„æµ‹æ¨¡å¼ (--eval)
              â”‚
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è¯„æµ‹åˆ†æ                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ é€è¡Œæ¯”å¯¹ (æ ‡å‡†ç­”æ¡ˆ vs æ£€æµ‹ç»“æœ)                          â”‚
â”‚  â€¢ æ¼æŠ¥åˆ†æ (ç¼ºå¤±çš„æ£€æµ‹)                                   â”‚
â”‚  â€¢ è¯¯æŠ¥åˆ†æ (å¤šä½™çš„æ£€æµ‹)                                   â”‚
â”‚  â€¢ ç±»åˆ«ä¸åŒ¹é…åˆ†æ                                           â”‚
â”‚  â€¢ æ±‡æ€»ç»Ÿè®¡                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
        è¯„æµ‹æŠ¥å‘Šè¾“å‡º
```

## ğŸ“ æ–‡ä»¶ä¾èµ–å…³ç³»

### æ ¸å¿ƒä¾èµ–é“¾

```
cli_standalone.ts (ä¸»å…¥å£)
    â”œâ”€â”€ types.ts (ç±»å‹å®šä¹‰)
    â”œâ”€â”€ ast_parser.ts (ASTè§£æ)
    â”‚   â”œâ”€â”€ clang.ts (Clangé›†æˆ)
    â”‚   â””â”€â”€ report.ts (æŠ¥å‘Šç”Ÿæˆ)
    â”œâ”€â”€ ast_scanner.ts (æ‰«æåè°ƒ)
    â”‚   â”œâ”€â”€ ast_variable_detector.ts
    â”‚   â”œâ”€â”€ ast_library_detector.ts
    â”‚   â””â”€â”€ ast_advanced_detector.ts
    â””â”€â”€ utils/
        â”œâ”€â”€ function_header_map.ts
        â””â”€â”€ segmented_table.ts
```

### æ£€æµ‹å™¨ä¾èµ–

```
ast_variable_detector.ts
    â”œâ”€â”€ types.ts (VariableInfo, SegmentedTable)
    â””â”€â”€ utils/segmented_table.ts

ast_library_detector.ts
    â”œâ”€â”€ types.ts (Issue)
    â””â”€â”€ utils/function_header_map.ts

ast_advanced_detector.ts
    â”œâ”€â”€ types.ts (MemoryAllocation, LoopInfo, TypeRange)
    â””â”€â”€ utils/segmented_table.ts
```

## ğŸ¯ å…³é”®æ¥å£

### 1. CASTParser æ¥å£

```typescript
class CASTParser {
  static async create(): Promise<CASTParser>
  parse(sourceCode: string): ASTNode
  convertNode(node: any, parent?: any): ASTNode
  traverseNode(node: ASTNode, callback: Function): void
}
```

### 2. æ£€æµ‹å™¨æ¥å£

```typescript
// å˜é‡æ£€æµ‹å™¨
class ASTVariableDetector {
  analyzeFile(file: vscode.Uri): Promise<vscode.Diagnostic[]>
  checkUninitializedVariables(ast: ASTNode, lines: string[]): Issue[]
  checkWildPointers(ast: ASTNode, lines: string[]): Issue[]
  checkNullPointers(ast: ASTNode, lines: string[]): Issue[]
}

// åº“å‡½æ•°æ£€æµ‹å™¨
class ASTLibraryDetector {
  analyzeFile(file: vscode.Uri): Promise<vscode.Diagnostic[]>
  checkLibraryHeaders(content: string, lines: string[]): Issue[]
  checkHeaderSpelling(file: vscode.Uri): Promise<vscode.Diagnostic[]>
}

// é«˜çº§æ£€æµ‹å™¨
class ASTAdvancedDetector {
  analyzeFile(file: vscode.Uri): Promise<vscode.Diagnostic[]>
  checkDeadLoops(ast: ASTNode, lines: string[]): Issue[]
  checkNumericRange(ast: ASTNode, lines: string[]): Issue[]
  checkMemoryLeaks(ast: ASTNode, lines: string[]): Issue[]
  checkFormatStrings(ast: ASTNode, lines: string[]): Issue[]
}
```

### 3. CLI æ¥å£

```typescript
// å¼•æ“æ¨¡å¼
type EngineMode = 'auto' | 'ast' | 'heuristic'

// ä¸»åˆ†æå‡½æ•°
async function analyzeDir(dir: string, engine: EngineMode): Promise<Issue[]>

// è¯„æµ‹å‡½æ•°
function runEvaluation(dir: string, issues: Issue[]): EvaluationSummary
function runEvaluationDetailed(dir: string, issues: Issue[]): EvaluationDetail
```

## ğŸ”§ é…ç½®ä¸æ‰©å±•ç‚¹

### 1. æ£€æµ‹å™¨æ³¨å†Œ

```typescript
// åœ¨ cli_standalone.ts ä¸­çš„æ£€æµ‹å™¨è°ƒç”¨é¡ºåº
const uninitIssues = await checkUninitializedVariables(ast, lines, filePath)
const wildPointerIssues = await checkWildPointers(ast, lines, filePath)
const nullPointerIssues = await checkNullPointers(ast, lines, filePath)
const deadLoopIssues = checkDeadLoops(ast, lines, filePath)
const rangeIssues = checkNumericRange(ast, lines, filePath)
const memoryLeakIssues = checkMemoryLeaks(ast, lines, filePath)
const formatIssues = checkFormatStrings(ast, lines, filePath)
const headerIssues = checkLibraryHeaders(content, lines, filePath)
```

### 2. å›é€€æœºåˆ¶é…ç½®

```typescript
// AST æ£€æµ‹å¤±è´¥æ—¶çš„å›é€€å‡½æ•°æ˜ å°„
const fallbackMap = {
  'Uninitialized': checkUninitializedVariablesFallback,
  'Wild pointer': checkWildPointersFallback,
  'Null pointer': checkNullPointersFallback,
  'Dead loop': checkDeadLoopsFallback,
  'Range overflow': checkNumericRangeFallback,
  'Memory leak': checkMemoryLeaksFallback,
  'Format': checkFormatStringsFallback
}
```

### 3. è¯„æµ‹æ ‡å‡†é…ç½®

```typescript
// åœ¨è¯„æµ‹å‡½æ•°ä¸­çš„ç±»åˆ«æ˜ å°„
const categoryMap = {
  'uninitialized': 'Uninitialized',
  'wild pointer': 'Wild pointer',
  'null pointer': 'Null pointer',
  'memory leak': 'Memory leak',
  'dead loop': 'Dead loop',
  'format': 'Format',
  'header': 'Header'
}
```

---

*æ­¤æ–‡æ¡£è¯¦ç»†æè¿°äº†ä»£ç æ¨¡å—é—´çš„å…³ç³»å’Œä¾èµ–ï¼Œæœ‰åŠ©äºç†è§£é¡¹ç›®æ¶æ„å’Œè¿›è¡Œåç»­å¼€å‘ã€‚*
